<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUNCIONES ASINCRONAS ASYNC AWAIT</title>
</head>
<body>

    <script>
        //primer parametro del Promise
        //ejecutor va a ser un callback
        //el primer parametro y el segundo tienen que ser un callback

        //resolve es el callback es el que tiene que saber que hacer cuando salio todo bien
        //y le paso el valor exitoso
        //reject es el callback que tiene que saber que hacer cuando salio todo mal
        //Le paso la razon de porque fallo el metodo
        //SE PROGRAMA DENTRO DEL CALLBACK DEL PRIMER PARAMETRO DE LA PROMESA
        // new Promise((resolve,reject)=>{
        // });

        function sumar(a,b)
        {
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{

                    if(typeof a !== "number" || typeof b !== "number")
                    {
                        reject("Parametros invalidos para la suma");
                    }
                    else{
                        let rta = a + b;
                    console.log("La suma es:"+rta);
                    resolve(rta);
                    }
                    
                },3000);
            });
        }

        function restar (a,b){
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{

                    if(typeof a !== "number" || typeof b !== "number" )
                    {
                        reject("Parametros invalidos para la resta");
                    }
                    else{
                        let rta = a-b;
                    console.log("La resta es:"+rta);
                    resolve(rta);
                    }
                    
                },3000);
            });
        }

        function multiplicar(a,b)
        {
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{

                    if(typeof a !== "number" || typeof b !== "number")
                    {
                        reject("Parametros invalidos para la multiplicacion");
                    }
                    else{
                        let rta = a*b;
                    console.log("La multi es:"+rta);
                    resolve(rta);
                    }
                    
                },3000);
            });
        }

        function cuadrado(a)
        {
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{

                    if(typeof a !== "number")
                    {
                        reject("Parametros invalidos para el cuadrado");
                    }
                    else{
                       let rta = a*a;
                    console.log("La cuadracion es:"+rta);
                    resolve(rta); 
                    }
                    
                },3000);
            });
        }

        async function Calcular(a,b)
        {
            try {
                let sumacion = await sumar(a,b);
                let cuad = await cuadrado(sumacion);
                let multi = await multiplicar(cuad,10);
                let resta = await restar(multi,40);
                
                informar(resta);
            } catch (error) {
                console.error(error);
            }
            
        }


        function isPositive(valor)
        {
            return new Promise((resolve,reject)=>{
                setTimeout(() => {
                    if(typeof valor !== "number")
                    {
                        reject("Eso no es un numero");
                    }

                    let rta = "Es positivo";
                    if(valor < 0)
                    {
                        rta = "Es negativo";
                    }
                    resolve(rta);
                }, 3000);
            });
        }

        function informar(resultado)
        {
            console.log("El resultado es:" + resultado);
        }
        console.log("Inicio");

        // let promesa =isPositive(-10);
        // //THEN recibe un callback como primer parametro
        // //Que sabe que hay que hacer cuando la promesa salio todo bien
        // //va a recibir el callback que le pasamos como RESOLVE A LA PROMESA

        // promesa.then((x)=>{
        //     console.log(x);
        // }); 
        // //CATCH recibe un callback como primer parametro
        // //que sabe que hay que hacer cuando la promesa se resolvio de mala manera
        // //va a recibir el callback que le pasamos como REJECT A LA PROMESA
        // promesa.catch((error)=>{
        //     console.error(error);
        // });

            Calcular(8,5);

        console.log("Fin");


        




    </script>

</body>
</html>